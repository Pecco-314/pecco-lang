# Lexer 词法分析器

词法分析器（Lexer）负责将源代码文本转换为 token 流。

## Token 类型

支持的 token 类型（定义在 `include/token.hpp`）：

```cpp
enum class TokenKind {
  EndOfFile,      // 文件结束标记
  Integer,        // 整数字面量
  Float,          // 浮点数字面量
  String,         // 字符串字面量
  Identifier,     // 标识符
  Keyword,        // 关键字
  Operator,       // 操作符
  Punctuation,    // 标点符号
  Comment,        // 注释
  Error,          // 错误 token
};
```

每个 token 包含：
- `kind`：token 类型
- `lexeme`：词素内容（字符串形式）
- `line`：行号（从 1 开始）
- `column`：列号（从 1 开始）

## 支持的语言特性

### 数字字面量
- **整数**：支持任意长度的十进制整数，如 `0`、`42`、`1234567890`
- **浮点数**：
  - 小数点形式：`3.14`、`0.0`
  - 科学计数法：`6.022e23`、`1e-3`、`1.5e+10`

### 字符串字面量
- **双引号包围**：`"hello world"`
- **转义序列支持**：
  - `\\` - 反斜杠
  - `\"` - 双引号
  - `\'` - 单引号
  - `\n` - 换行符
  - `\t` - 制表符
  - `\r` - 回车符
  - `\b` - 退格符
  - `\f` - 换页符
  - `\0` - 空字符
- **错误检测**：
  - 未终止的字符串（到达行尾或文件尾）
  - 无效的转义序列（如 `\q`）

### 标识符与关键字
- **标识符规则**：
  - 起始字符：字母或下划线 `[a-zA-Z_]`
  - 后续字符：字母、数字或下划线 `[a-zA-Z0-9_]`
- **关键字列表**（当前版本）：
  ```
  "let", "func", "if", "else", "return", "while", "true", "false"
  ```
- **关键字识别**：扫描完标识符后在关键字表中查找，匹配则标记为 `Keyword`，否则为 `Identifier`

### 操作符
- **字符集**：`+-*/%=&|^!<>?.`
- **贪婪匹配**：连续的操作符字符会被合并为一个 token
  - 例如：`==`、`!=`、`<=`、`>=`、`&&`、`||`、`++`、`--`、`<<`、`>>`、`::`、`->`
- **无语义验证**：lexer 阶段不检查操作符的语义合法性

### 标点符号
- **字符集**：`(){}[],;:#`
- **单字符 token**：每个标点符号独立成为一个 token

### 注释
- **行注释**：以 `#` 开始，到行尾结束
- **保留内容**：注释内容会被保留在 token 中（不包括 `#` 字符）
- **行号跟踪**：注释结束后自动处理换行符并更新行号
